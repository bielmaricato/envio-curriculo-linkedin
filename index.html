<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Envio Linkedinho do Bielson - Dashboard de Vagas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
        color: #e2e8f0;
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
    }

    header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(59, 130, 246, 0.2);
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
    }

    h1 {
        font-size: 2.8rem;
        font-weight: 700;
        background: linear-gradient(135deg, #3b82f6, #06b6d4);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 10px;
    }

    .subtitle {
        font-size: 1.1rem;
        color: #94a3b8;
        font-weight: 400;
    }

    .dashboard {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .card {
        background: rgba(30, 41, 59, 0.9);
        border: 1px solid rgba(59, 130, 246, 0.15);
        border-radius: 16px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        border-color: rgba(59, 130, 246, 0.3);
    }

    .card h3 {
        font-size: 1.1rem;
        color: #cbd5e1;
        margin-bottom: 15px;
        font-weight: 500;
    }

    .card .value {
        font-size: 2.5rem;
        font-weight: 700;
        color: #f8fafc;
        margin-bottom: 10px;
    }

    .card-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
        color: #60a5fa;
        opacity: 0.9;
    }

    .trend {
        font-size: 0.9rem;
        color: #38bdf8;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .content {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 20px;
    }

    .table-container {
        background: rgba(30, 41, 59, 0.9);
        border: 1px solid rgba(59, 130, 246, 0.15);
        border-radius: 16px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
    }

    .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .table-header h2 {
        font-size: 1.5rem;
        font-weight: 600;
        color: #f1f5f9;
    }

    .search-box {
        display: flex;
        align-items: center;
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid rgba(59, 130, 246, 0.3);
        border-radius: 10px;
        padding: 10px 15px;
        width: 300px;
        color: #cbd5e1;
    }

    .search-box input {
        border: none;
        background: transparent;
        outline: none;
        width: 100%;
        font-size: 0.95rem;
        color: #f8fafc;
    }

    .search-box i {
        color: #60a5fa;
        margin-right: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    thead {
        background: rgba(59, 130, 246, 0.1);
    }

    th {
        padding: 15px;
        text-align: left;
        font-weight: 600;
        color: #93c5fd;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    td {
        padding: 15px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        font-size: 0.95rem;
        color: #e2e8f0;
    }

    tr:hover {
        background: rgba(59, 130, 246, 0.08);
    }

    .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
    }

    .badge.remote {
        background: #064e3b;
        color: #34d399;
    }

    .badge.senior {
        background: #78350f;
        color: #facc15;
    }

    .badge.local {
        background: #1e3a8a;
        color: #93c5fd;
    }

    .company {
        display: flex;
        align-items: center;
    }

    .company-icon {
        width: 30px;
        height: 30px;
        background: #2563eb;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 10px;
        color: white;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        gap: 10px;
    }

    .pagination button {
        padding: 8px 15px;
        border: none;
        background: rgba(15, 23, 42, 0.7);
        color: #e2e8f0;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        border: 1px solid rgba(59, 130, 246, 0.3);
        transition: all 0.3s ease;
    }

    .pagination button:hover {
        background: rgba(59, 130, 246, 0.2);
    }

    .pagination button.active {
        background: #2563eb;
        color: white;
        border-color: #2563eb;
    }

    .chart-card {
        background: rgba(30, 41, 59, 0.9);
        border: 1px solid rgba(59, 130, 246, 0.15);
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    .chart-card h3 {
        font-size: 1.1rem;
        margin-bottom: 15px;
        color: #f8fafc;
        font-weight: 600;
    }

    .stat-item {
        text-align: center;
        padding: 15px;
        background: rgba(15, 23, 42, 0.8);
        border-radius: 10px;
        border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: #60a5fa;
    }

    .stat-label {
        font-size: 0.8rem;
        color: #94a3b8;
        margin-top: 5px;
    }

    @media (max-width: 1024px) {
        .content {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .dashboard {
            grid-template-columns: 1fr;
        }

        .table-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }

        .search-box {
            width: 100%;
        }
    }
</style>

</head>
<body>
    <div class="container">
        <header>
            <h1>Envio Linkedinho do Bielson</h1>
            <p class="subtitle">Dashboard de Vagas de Analista de Sistemas Sênior - Dados em Tempo Real</p>
        </header>

        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <p>Carregando dados das vagas...</p>
        </div>

        <div id="content" style="display: none;">
            <div class="dashboard">
                <div class="card total-vagas">
                    <div class="card-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <h3>Total de Vagas</h3>
                    <div class="value" id="total-vagas">0</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span>Atualizado recentemente</span>
                    </div>
                </div>

                <div class="card vagas-remotas">
                    <div class="card-icon">
                        <i class="fas fa-laptop-house"></i>
                    </div>
                    <h3>Vagas Remotas</h3>
                    <div class="value" id="vagas-remotas">0</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span id="remote-percent">% do total</span>
                    </div>
                </div>

                <div class="card vagas-senior">
                    <div class="card-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <h3>Vagas Sênior</h3>
                    <div class="value" id="vagas-senior">0</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span id="senior-percent">% do total</span>
                    </div>
                </div>

                <div class="card vagas-eua">
                    <div class="card-icon">
                        <i class="fas fa-flag-usa"></i>
                    </div>
                    <h3>Vagas nos EUA</h3>
                    <div class="value" id="vagas-eua">0</div>
                    <div class="trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span id="eua-percent">Principal localização</span>
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Lista de Vagas Encontradas</h2>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="search-input" placeholder="Pesquisar vagas...">
                        </div>
                    </div>

                    <table id="jobs-table">
                        <thead>
                            <tr>
                                <th>Cargo</th>
                                <th>Empresa</th>
                                <th>Localização</th>
                                <th>Status</th>
                                <th>Data</th>
                            </tr>
                        </thead>
                        <tbody id="jobs-table-body">
                            <!-- Os dados serão inseridos aqui via JavaScript -->
                        </tbody>
                    </table>

                    <div class="pagination" id="pagination">
                        <!-- A paginação será gerada via JavaScript -->
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <h3>Distribuição por Tipo</h3>
                        <div class="chart-container">
                            <canvas id="type-chart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <h3>Estatísticas das Vagas</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="avg-time">0</div>
                                <div class="stat-label">Tempo Médio</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="new-vagas">0</div>
                                <div class="stat-label">Novas (7 dias)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variáveis globais
        let vagas = [];
        let currentPage = 1;
        const itemsPerPage = 5;
        let filteredVagas = [];

        // Carregar dados do JSON
        async function loadVagasData() {
            try {
                const response = await fetch('vagas_remotas_senior.json');
                
                if (!response.ok) {
                    throw new Error(`Erro ao carregar o arquivo: ${response.status}`);
                }
                
                vagas = await response.json();
                filteredVagas = [...vagas];
                
                // Esconder loading e mostrar conteúdo
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                
                // Inicializar a aplicação
                initializeApp();
                
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                document.getElementById('loading').innerHTML = `
                    <div style="color: #ef4444;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <p>Erro ao carregar os dados: ${error.message}</p>
                        <p style="margin-top: 10px; font-size: 0.9rem;">
                            Certifique-se de que o arquivo "vagas_remotas_senior.json" está na mesma pasta que este HTML.
                        </p>
                    </div>
                `;
            }
        }

        // Inicializar a aplicação após carregar os dados
        function initializeApp() {
            updateDashboard();
            renderTable();
            setupCharts();
            setupSearch();
        }

        // Atualizar dashboard
        function updateDashboard() {
            const totalVagas = vagas.length;
            const vagasRemotas = vagas.filter(vaga => vaga.remote).length;
            const vagasSenior = vagas.filter(vaga => vaga.senior).length;
            const vagasEUA = vagas.filter(vaga => vaga.location.includes('Estados Unidos')).length;

            document.getElementById('total-vagas').textContent = totalVagas;
            document.getElementById('vagas-remotas').textContent = vagasRemotas;
            document.getElementById('vagas-senior').textContent = vagasSenior;
            document.getElementById('vagas-eua').textContent = vagasEUA;

            // Atualizar porcentagens
            document.getElementById('remote-percent').textContent = `${Math.round((vagasRemotas/totalVagas)*100)}% do total`;
            document.getElementById('senior-percent').textContent = `${Math.round((vagasSenior/totalVagas)*100)}% do total`;
            document.getElementById('eua-percent').textContent = `${Math.round((vagasEUA/totalVagas)*100)}% do total`;
        }

        // Renderizar tabela
        function renderTable() {
            const tableBody = document.getElementById('jobs-table-body');
            const pagination = document.getElementById('pagination');
            
            // Calcular índices para paginação
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedVagas = filteredVagas.slice(startIndex, endIndex);
            
            // Limpar tabela
            tableBody.innerHTML = '';
            
            if (paginatedVagas.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="5" style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                        Nenhuma vaga encontrada com os filtros atuais.
                    </td>
                `;
                tableBody.appendChild(row);
            } else {
                // Preencher tabela
                paginatedVagas.forEach(vaga => {
                    const row = document.createElement('tr');
                    
                    // Determinar badges
                    const remoteBadge = vaga.remote ? '<span class="badge remote">Remoto</span>' : '';
                    const seniorBadge = vaga.senior ? '<span class="badge senior">Sênior</span>' : '';
                    const locationBadge = vaga.location.includes('Estados Unidos') ? '<span class="badge local">EUA</span>' : '';
                    
                    row.innerHTML = `
                        <td>
                            <strong>${vaga.title}</strong>
                            <div style="margin-top: 5px;">
                                ${remoteBadge} ${seniorBadge} ${locationBadge}
                            </div>
                        </td>
                        <td>
                            <div class="company">
                                <div class="company-icon">${vaga.company.charAt(0)}</div>
                                ${vaga.company}
                            </div>
                        </td>
                        <td>${vaga.location}</td>
                        <td>
                            <a href="${vaga.link}" target="_blank" style="color: #667eea; text-decoration: none;">
                                <i class="fas fa-external-link-alt"></i> Ver Vaga
                            </a>
                        </td>
                        <td>${vaga.time}</td>
                    `;
                    
                    tableBody.appendChild(row);
                });
            }
            
            // Atualizar paginação
            updatePagination();
        }

        // Atualizar paginação
        function updatePagination() {
            const pagination = document.getElementById('pagination');
            const totalPages = Math.ceil(filteredVagas.length / itemsPerPage);
            
            pagination.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Botão anterior
            const prevButton = document.createElement('button');
            prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTable();
                }
            });
            pagination.appendChild(prevButton);
            
            // Botões de página
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                pageButton.className = i === currentPage ? 'active' : '';
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    renderTable();
                });
                pagination.appendChild(pageButton);
            }
            
            // Botão próximo
            const nextButton = document.createElement('button');
            nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTable();
                }
            });
            pagination.appendChild(nextButton);
        }

        // Configurar gráficos
        function setupCharts() {
            // Gráfico de distribuição por tipo
            const typeCtx = document.getElementById('type-chart').getContext('2d');
            
            const remoteCount = vagas.filter(v => v.remote).length;
            const seniorCount = vagas.filter(v => v.senior).length;
            const euaCount = vagas.filter(v => v.location.includes('Estados Unidos')).length;
            
            new Chart(typeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Remotas', 'Sênior', 'EUA'],
                    datasets: [{
                        data: [remoteCount, seniorCount, euaCount],
                        backgroundColor: [
                           '#0073BB', // azul amazon
                    '#FF9900', // laranja amazon
                    '#232F3E'  // azul escuro AWS
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Atualizar estatísticas
            document.getElementById('avg-time').textContent = '1 semana';
            document.getElementById('new-vagas').textContent = vagas.filter(v => 
                v.time.includes('dia') || v.time.includes('Há 1 semana')
            ).length;
        }

        // Configurar busca
        function setupSearch() {
            const searchInput = document.getElementById('search-input');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                if (searchTerm) {
                    filteredVagas = vagas.filter(vaga => 
                        vaga.title.toLowerCase().includes(searchTerm) ||
                        vaga.company.toLowerCase().includes(searchTerm) ||
                        vaga.location.toLowerCase().includes(searchTerm)
                    );
                } else {
                    filteredVagas = [...vagas];
                }
                
                currentPage = 1;
                renderTable();
            });
        }

        // Iniciar carregamento dos dados quando a página carregar
        document.addEventListener('DOMContentLoaded', loadVagasData);
    </script>
</body>
</html>
